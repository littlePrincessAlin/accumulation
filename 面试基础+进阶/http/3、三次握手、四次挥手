1、三次握手
TCP建立链接需要三次握手：
（1）客户端向服务端发送连接请求报文段。
（2）服务端收到连接请求报文段后，如果同意连接，则会发送一个应答。
（3）当客户端收到连接同意的应答后，还要向服务端发送一个确认报文。

2、为什么 TCP 建立连接需要三次握手，明明两次就可以建立起连接？
这是为了防止出现失效的连接请求报文段被服务端接收的情况，从而产生错误。
举例：客户端--> 发送连接请求报文段A --> 如果因为网络超时，TCP会开启“超时重传”机制 -->
再次发送一个连接请求 B --> 服务端收到连接请求报文段后，同意连接，发送一个应答 --> 客户端收到连接同意的应答后
，还要向服务端发送一个确认报文,建立了请求 --> 
假设这时候连接请求 A 在两端关闭后终于抵达了服务端，那么此时服务端会认为客户端又需要建立 TCP 连接，
从而应答了该请求并进入 ESTABLISHED 状态。但是客户端其实是 CLOSED 的状态，那么就会导致服务端一直等待，
造成资源的浪费。

3、四次挥手
TCP断开链接需要四次握手：
（1）客户端 A 认为数据发送完成，则它需要向服务端 B 发送连接释放请求。
（2）B 收到连接释放请求后，会告诉应用层要释放 TCP 链接。然后会发送 ACK 包，
并进入 CLOSE_WAIT状态，此时表明 A 到 B 的连接已经释放，不再接收 A 发的数据了。
但是因为 TCP 连接是双向的，所以 B 仍旧可以发送数据给 A
（3）B 如果此时还有没发完的数据会继续发送，完毕后会向 A 发送连接释放请求，然后 B 便进入 LAST-ACK 状态。
（4）A 收到释放请求后，向 B 发送确认应答，此时 A 进入 TIME-WAIT 状态。

4、为什么不是三次挥手？
